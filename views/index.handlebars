<div class="container">
  <div class="head row d-flex justify-content-between align-items-end">
    <h2 class="total-amount col-3">
      <i class="fas fa-dollar-sign"></i> {{totalAmount}}
    </h2>

    <div class="index-category col-3">
      <form action="/filter/category" method="POST">
        <label class="form-label" for="keyword"></label>
        <input class="form-control btn-category-inner" list="categories" name="keyword" placeholder="類別" id="keyword"
          autocomplete="off" onchange="submit()" required>
        <datalist id="categories">
          <option>全部類別</option>
          <option>家居物業</option>
          <option>交通出行</option>
          <option>休閒娛樂</option>
          <option>餐飲食品</option>
          <option>其他</option>
        </datalist>
      </form>
    </div>
    <div class="index-month-filter col-3">
      <form action="/filter/date" method="POST">
        <label class="month" for="month"></label>
        <select class="form-select" name="month" id="month" aria-label="multiple select" onchange="submit()">
          <option value="全部月份">月份</option>
          {{#each monthList}}
          <option value="{{this.nameInAlpha}}">{{this.nameInChinese}}</option>
          {{/each}}
          <option value="全部月份">全部月份</option>
        </select>
      </form>
    </div>
    <div class=" text-center col-3">
      <form action="/records/new" method="GET">
        <button type="submit" class="index-new btn btn-outline-secondary"><i
            class="fas fa-plus-circle mr-1 ">新增</i></button>
      </form>
    </div>
  </div>

  <table class="table table-striped table-hover mt-3">
    {{#each records}}
    <tr>
      <td class="fa-3x">{{{ this.iconName }}}</td>
      <td>
        <div class="index-name">{{ this.name }}</div>
        <div class="index-date">{{ this.date }}</div>
      </td>
      <td>{{this.amount}}</td>
      <td>
        <form action="/records/edit/{{this._id}}" method="GET">
          <button type="submit" class="index-edit btn btn-light-sm"><i class="fas fa-edit"></i></button>
        </form>
        <form action="/records/{{this._id}}?_method=DELETE" method="POST">
          <button type="submit" class="index-delete btn btn-light-sm" onclick="return confirmDelete();"><i
              class="far fa-trash-alt"></i></button>
        </form>
      </td>
    </tr>
    {{/each}}
  </table>
</div>

<script>
  function confirmDelete() {
    return confirm('你確定要刪除該筆紀錄嗎?')
  }
</script>